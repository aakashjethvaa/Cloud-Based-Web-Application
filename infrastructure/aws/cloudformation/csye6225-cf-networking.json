{
  "AWSTemplateFormatVersion" : "2010-09-09",
  "Description" : "Cloud Formation Template", 
  "Parameters": {
		"VpcName": {
			"Type": "String"
		},
		"CidrBlock": {
			"Type": "String"
		},
		"publicSubnet1": {
			"Type": "String"
		},
		"publicSubnet2": {
			"Type": "String"
		},
		"publicSubnet3": {
			"Type": "String"
		},
        "PublicCidrBlock1": {
			"Type": "String"
		},
		"PublicCidrBlock2": {
			"Type": "String"
		},
		"PublicCidrBlock3": {
			"Type": "String"
		},
        "privateSubnet1": {
			"Type": "String"
		},
		"privateSubnet2": {
			"Type": "String"
		},
		"privateSubnet3": {
			"Type": "String"
		},
        "PrivateCidrBlock1": {
			"Type": "String"
		},
		"PrivateCidrBlock2": {
			"Type": "String"
		},
		"PrivateCidrBlock3": {
			"Type": "String"
		},
        "AvailabilityZone1": {
			"Type": "String"
		},
		"AvailabilityZone2": {
			"Type": "String"
		},
		"AvailabilityZone3": {
			"Type": "String"
		},
        "InternetGatewayName": {
			"Type": "String"
		},
		"RouteTableName": {
			"Type": "String"
		}
	},
 
  "Resources" : {
    "VPC" : {
	    "Type" : "AWS::EC2::VPC",
	    "Properties" : {
	        "CidrBlock" : { "Ref" : "CidrBlock" },
		    "EnableDnsSupport" : "true",
 		    "EnableDnsHostnames" : "true",
      		"InstanceTenancy" : "default",
		    "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "VpcName" }} ]
		    }
       },
    "PublicSubnet1" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
 	        "AvailabilityZone" : { "Ref" : "AvailabilityZone1" },
	        "VpcId" : { "Ref" : "VPC" },
	        "CidrBlock" : { "Ref" : "PublicCidrBlock1" },
            "MapPublicIpOnLaunch" : true,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "publicSubnet1" } } ]
	      }
	    },
    "PublicSubnet2" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
		    "AvailabilityZone" : { "Ref" : "AvailabilityZone2" },
	        "VpcId" : { "Ref" : "VPC" },
            "CidrBlock" : { "Ref" : "PublicCidrBlock2" },
		    "MapPublicIpOnLaunch" : true,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "publicSubnet2" } } ]
	      }
	    },	
		
    "PublicSubnet3" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
		    "AvailabilityZone" : { "Ref" : "AvailabilityZone3" },
	        "VpcId" : { "Ref" : "VPC" },
	        "CidrBlock" : { "Ref" : "PublicCidrBlock3" },
            "MapPublicIpOnLaunch" : true,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "publicSubnet3" } } ]
	      }
	    },
    "PrivateSubnet1" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
		    "AvailabilityZone" : { "Ref" : "AvailabilityZone1" },
	        "VpcId" : { "Ref" : "VPC" },
	        "CidrBlock" : { "Ref" : "PrivateCidrBlock1" },
		    "MapPublicIpOnLaunch" : false,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "privateSubnet1" }  } ]
	      }
	    },
	
    "PrivateSubnet2" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
		    "AvailabilityZone" : { "Ref" : "AvailabilityZone2" },
	        "VpcId" : { "Ref" : "VPC" },
	        "CidrBlock" : { "Ref" : "PrivateCidrBlock2" },
            "MapPublicIpOnLaunch" : false,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "privateSubnet2" } } ]
	      }
	    },
		
    "PrivateSubnet3" : {
	    "Type" : "AWS::EC2::Subnet",
	    "Properties" : {
		    "AvailabilityZone" : { "Ref" : "AvailabilityZone3" },
	        "VpcId" : { "Ref" : "VPC" },
	        "CidrBlock" : { "Ref" : "PrivateCidrBlock3" },
		    "MapPublicIpOnLaunch" : false,
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "privateSubnet3" } } ]
	      }
	    },
    "InternetGateway" : {
	      "Type" : "AWS::EC2::InternetGateway",
	      "Properties" : {
            "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "InternetGatewayName" } } ]
	      }
	    },
		
    "AttachGateway" : {
	       "Type" : "AWS::EC2::VPCGatewayAttachment",
	       "Properties" : {
	         "VpcId" : { "Ref" : "VPC" },
	         "InternetGatewayId" : { "Ref" : "InternetGateway" }
	       }
	    },

    "RouteTable" : {
	      "Type" : "AWS::EC2::RouteTable",
	      "Properties" : {
	        "VpcId" : {"Ref" : "VPC"},
	        "Tags" : [ {"Key" : "Name", "Value" : { "Ref" : "RouteTableName" } } ]
	      }
	    },
    "Route" : {
         "Type" : "AWS::EC2::Route",
            "Properties" : {
            "RouteTableId" : { "Ref" : "RouteTable" },
            "DestinationCidrBlock" : "0.0.0.0/0",
            "GatewayId" : { "Ref" : "InternetGateway" }
              }
	    }

	}
}
